{
  "_format": "hh-sol-artifact-1",
  "contractName": "S3ntimentSurveyStore",
  "sourceName": "contracts/survey-store.sol",
  "abi": [
    {
      "inputs": [],
      "name": "InvalidSignature",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NullifierAlreadyUsed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SignerNotSurveyOwner",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SurveyAlreadyExists",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SurveyNotFound",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        },
        {
          "indexed": true,
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "nullifier",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newCount",
          "type": "uint256"
        }
      ],
      "name": "CardValidated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "signer",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "messageHash",
          "type": "bytes32"
        }
      ],
      "name": "SignatureValidated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "ipfsCid",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "SurveyCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "newIpfsCid",
          "type": "string"
        }
      ],
      "name": "SurveyUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "name": "batchCardCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "ipfsCid",
          "type": "string"
        }
      ],
      "name": "createSurvey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        }
      ],
      "name": "getBatchCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "getOwnerSurveyCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "getOwnerSurveys",
      "outputs": [
        {
          "internalType": "string[]",
          "name": "",
          "type": "string[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        }
      ],
      "name": "getSurvey",
      "outputs": [
        {
          "internalType": "string",
          "name": "ipfsCid",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "createdAt",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "nullifier",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        }
      ],
      "name": "isNullifierUsed",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "authSigAddress",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        }
      ],
      "name": "isOwner",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        }
      ],
      "name": "surveyExists",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "newIpfsCid",
          "type": "string"
        }
      ],
      "name": "updateSurvey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "usedNullifiers",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "nullifier",
          "type": "string"
        },
        {
          "internalType": "bytes",
          "name": "signature",
          "type": "bytes"
        },
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "surveyId",
          "type": "string"
        }
      ],
      "name": "validateCard",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x6080806040523461001657611014908161001c8239f35b600080fdfe6080604052600436101561001257600080fd5b60003560e01c8063206137aa146100d25780633cfebb6e146100cd57806342abbabd146100c857806394b2c95c146100c35780639ee84812146100a5578063be7d3568146100be578063c15d3593146100b9578063c5b88066146100b4578063c6576e47146100af578063cd379964146100aa578063ce268070146100a55763f4060dd1146100a057600080fd5b6107ab565b610442565b6106c5565b610632565b6105f8565b61054c565b61046e565b6103ca565b610357565b6101ca565b34610103576020366003190112610103576004356000526003602052602060ff604060002054166040519015158152f35b600080fd5b600435906001600160a01b038216820361010357565b60005b8381106101315750506000910152565b8181015183820152602001610121565b9060209161015a8151809281855285808601910161011e565b601f01601f1916010190565b6020808201906020835283518092526040830192602060408460051b8301019501936000915b84831061019c5750505050505090565b90919293949584806101ba600193603f198682030187528a51610141565b980193019301919493929061018c565b3461010357602080600319360112610103576001600160a01b036101ec610108565b1660005260019060018152604060002080549067ffffffffffffffff82116102645760405192610221818460051b0185610296565b82845260009182528082208185015b84841061024957604051806102458882610166565b0390f35b868381926102568561089d565b815201920193019290610230565b634e487b7160e01b600052604160045260246000fd5b6060810190811067ffffffffffffffff82111761026457604052565b90601f8019910116810190811067ffffffffffffffff82111761026457604052565b604051906102c58261027a565b565b92919267ffffffffffffffff821161026457604051916102f1601f8201601f191660200184610296565b829481845281830111610103578281602093846000960137010152565b9080601f8301121561010357816020610329933591016102c7565b90565b6020600319820112610103576004359067ffffffffffffffff8211610103576103299160040161030e565b346101035760206001600160a01b0360016103796103743661032c565b610739565b0154161515604051908152f35b9060406003198301126101035767ffffffffffffffff60043581811161010357836103b39160040161030e565b92602435918211610103576103299160040161030e565b34610103576103d836610386565b90604051610425602182602095866103f9818401978881519384920161011e565b8201601f60fa1b88820152610416825180938a878501910161011e565b01036001810184520182610296565b5190206000526003815260ff604060002054166040519015158152f35b3461010357602061046561045f61045836610386565b919061075f565b90610785565b54604051908152f35b346101035761047c36610386565b9061048981511515610940565b6104958251151561098c565b6001600160a01b036104b960016104ab84610739565b01546001600160a01b031690565b1661053a576105357fdb3a8af2f37abe346b31fdd308fc1e8bcdfe1512f0e0a9790d5677cb5e3ba2c69161050b6104ee6102b8565b85815233602082015242604082015261050683610739565b610b04565b336000908152600160205260409020610525908290610b43565b6040519182913395429184610b8d565b0390a2005b604051630b6ed0e760e21b8152600490fd5b346101035760803660031901126101035767ffffffffffffffff6004358181116101035761057e90369060040161030e565b906024358181116101035736602382011215610103576105a89036906024816004013591016102c7565b91604435828111610103576105c190369060040161030e565b60643592831161010357610245936105e06105e694369060040161030e565b92610c54565b60405190151581529081906020820190565b34610103576020366003190112610103576001600160a01b03610619610108565b1660005260016020526020604060002054604051908152f35b34610103576106436103743661032c565b604051906106508261027a565b6106598161089d565b825260018101546001600160a01b0390811660208401818152600290930154604085019081529190156106b3576106a493519251169051604051938493606085526060850190610141565b91602084015260408301520390f35b604051637e3336d960e01b8152600490fd5b34610103576040366003190112610103576106de610108565b6024359067ffffffffffffffff8211610103576020916001600160a01b039081906001906107149061037490369060040161030e565b015416906040519216148152f35b906107356020928281519485920161011e565b0190565b602061075291816040519382858094519384920161011e565b8101600081520301902090565b602061077891816040519382858094519384920161011e565b8101600281520301902090565b60209061079f92826040519483868095519384920161011e565b82019081520301902090565b34610103576107b936610386565b6107c282610739565b60018101549092906001600160a01b031633036108325761082d8261080b61081f947f09e712397bdfeb330419324b95d1d1e2a91a8b47587998d6d408c6958740e56d96610a2e565b604051938493604085526040850190610141565b908382036020850152610141565b0390a1005b60405162461bcd60e51b81526020600482015260096024820152682737ba1037bbb732b960b91b6044820152606490fd5b90600182811c92168015610893575b602083101461087d57565b634e487b7160e01b600052602260045260246000fd5b91607f1691610872565b906040519182600082546108b081610863565b9081845260209460019160018116908160001461091e57506001146108df575b5050506102c592500383610296565b600090815285812095935091905b8183106109065750506102c593508201013880806108d0565b855488840185015294850194879450918301916108ed565b925050506102c594925060ff191682840152151560051b8201013880806108d0565b1561094757565b60405162461bcd60e51b815260206004820152601960248201527f5375727665792049442063616e6e6f7420626520656d707479000000000000006044820152606490fd5b1561099357565b60405162461bcd60e51b815260206004820152601860248201527f49504653204349442063616e6e6f7420626520656d70747900000000000000006044820152606490fd5b90601f81116109e657505050565b6000916000526020600020906020601f850160051c83019410610a24575b601f0160051c01915b828110610a1957505050565b818155600101610a0d565b9092508290610a04565b919091825167ffffffffffffffff811161026457610a5681610a508454610863565b846109d8565b602080601f8311600114610a9957508190610a8a939495600092610a8e575b50508160011b916000199060031b1c19161790565b9055565b015190503880610a75565b90601f19831695610aaf85600052602060002090565b926000905b888210610aec57505083600195969710610ad3575b505050811b019055565b015160001960f88460031b161c19169055388080610ac9565b80600185968294968601518155019501930190610ab4565b906040600291610b15815185610a2e565b6001840160018060a01b036020830151166bffffffffffffffffffffffff60a01b8254161790550151910155565b908154680100000000000000008110156102645760018101808455811015610b77576102c592600052602060002001610a2e565b634e487b7160e01b600052603260045260246000fd5b939291610bb690610ba8604093606088526060880190610141565b908682036020880152610141565b930152565b90604051610bc88161027a565b604060028294610bd78161089d565b845260018101546001600160a01b031660208501520154910152565b634e487b7160e01b600052601160045260246000fd5b6000198114610c185760010190565b610bf3565b610c359060206040519282848094519384920161011e565b810103902090565b929190610bb6602091604086526040860190610141565b929091926020610c6b610c6684610739565b610bbb565b01805190946001600160a01b039390918416156106b357604093845190610d5f610d53610d4584610cb8610cb2610ca5602084018c610722565b601f60fa1b815260010190565b89610722565b0394610ccc601f1996878101835282610296565b8951610cec81610ce0602082018095610722565b03888101835282610296565b519020948951610d3b602082019282610d2f8a86603c917f19457468657265756d205369676e6564204d6573736167653a0a3332000000008252601c8201520190565b03908101835282610296565b519020998a610eee565b99516001600160a01b031690565b6001600160a01b031690565b9716968703610e7457610d86610d7f826000526003602052604060002090565b5460ff1690565b610e6357917f120be7a779fd31251124a6f0146622671a554fe5d1f554dc51006fc59b6dc1fe7fe6d0ab9c1bd0870c933bbb7d65e7a1ea1258be080d623c1ea46dce5cca03c55f969492610df8610deb610e5b98966000526003602052604060002090565b805460ff19166001179055565b610e0a610e048261075f565b84610785565b610e148154610c09565b9055610e3b610e35610e2e610e288461075f565b86610785565b5492610c1d565b93610c1d565b93610e4a865192839283610c3d565b0390a3519081529081906020820190565b0390a2600190565b8451636569570160e11b8152600490fd5b8451635a1f7bdd60e01b8152600490fd5b60ff601b9116019060ff8211610c1857565b15610e9e57565b606460405162461bcd60e51b815260206004820152602060248201527f496e76616c6964207369676e6174757265207265636f766572792076616c75656044820152fd5b6040513d6000823e3d90fd5b6041825103610f99576020916000918291848101519260606040830151920151901a92601b8410610f82575b90610f5e91610f3860ff8616601b8114908115610f77575b50610e97565b604051948594859094939260ff6060936080840197845216602083015260408201520152565b838052039060015afa15610f725760005190565b610ee2565b601c91501438610f32565b9290610f90610f5e92610e85565b93909150610f1a565b60405162461bcd60e51b815260206004820152601860248201527f496e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606490fdfea2646970667358221220d912bea55c14b0bcef70b59b1480cde9e6b103689bf2939051086d6d6bad2ada64736f6c63430008180033",
  "deployedBytecode": "0x6080604052600436101561001257600080fd5b60003560e01c8063206137aa146100d25780633cfebb6e146100cd57806342abbabd146100c857806394b2c95c146100c35780639ee84812146100a5578063be7d3568146100be578063c15d3593146100b9578063c5b88066146100b4578063c6576e47146100af578063cd379964146100aa578063ce268070146100a55763f4060dd1146100a057600080fd5b6107ab565b610442565b6106c5565b610632565b6105f8565b61054c565b61046e565b6103ca565b610357565b6101ca565b34610103576020366003190112610103576004356000526003602052602060ff604060002054166040519015158152f35b600080fd5b600435906001600160a01b038216820361010357565b60005b8381106101315750506000910152565b8181015183820152602001610121565b9060209161015a8151809281855285808601910161011e565b601f01601f1916010190565b6020808201906020835283518092526040830192602060408460051b8301019501936000915b84831061019c5750505050505090565b90919293949584806101ba600193603f198682030187528a51610141565b980193019301919493929061018c565b3461010357602080600319360112610103576001600160a01b036101ec610108565b1660005260019060018152604060002080549067ffffffffffffffff82116102645760405192610221818460051b0185610296565b82845260009182528082208185015b84841061024957604051806102458882610166565b0390f35b868381926102568561089d565b815201920193019290610230565b634e487b7160e01b600052604160045260246000fd5b6060810190811067ffffffffffffffff82111761026457604052565b90601f8019910116810190811067ffffffffffffffff82111761026457604052565b604051906102c58261027a565b565b92919267ffffffffffffffff821161026457604051916102f1601f8201601f191660200184610296565b829481845281830111610103578281602093846000960137010152565b9080601f8301121561010357816020610329933591016102c7565b90565b6020600319820112610103576004359067ffffffffffffffff8211610103576103299160040161030e565b346101035760206001600160a01b0360016103796103743661032c565b610739565b0154161515604051908152f35b9060406003198301126101035767ffffffffffffffff60043581811161010357836103b39160040161030e565b92602435918211610103576103299160040161030e565b34610103576103d836610386565b90604051610425602182602095866103f9818401978881519384920161011e565b8201601f60fa1b88820152610416825180938a878501910161011e565b01036001810184520182610296565b5190206000526003815260ff604060002054166040519015158152f35b3461010357602061046561045f61045836610386565b919061075f565b90610785565b54604051908152f35b346101035761047c36610386565b9061048981511515610940565b6104958251151561098c565b6001600160a01b036104b960016104ab84610739565b01546001600160a01b031690565b1661053a576105357fdb3a8af2f37abe346b31fdd308fc1e8bcdfe1512f0e0a9790d5677cb5e3ba2c69161050b6104ee6102b8565b85815233602082015242604082015261050683610739565b610b04565b336000908152600160205260409020610525908290610b43565b6040519182913395429184610b8d565b0390a2005b604051630b6ed0e760e21b8152600490fd5b346101035760803660031901126101035767ffffffffffffffff6004358181116101035761057e90369060040161030e565b906024358181116101035736602382011215610103576105a89036906024816004013591016102c7565b91604435828111610103576105c190369060040161030e565b60643592831161010357610245936105e06105e694369060040161030e565b92610c54565b60405190151581529081906020820190565b34610103576020366003190112610103576001600160a01b03610619610108565b1660005260016020526020604060002054604051908152f35b34610103576106436103743661032c565b604051906106508261027a565b6106598161089d565b825260018101546001600160a01b0390811660208401818152600290930154604085019081529190156106b3576106a493519251169051604051938493606085526060850190610141565b91602084015260408301520390f35b604051637e3336d960e01b8152600490fd5b34610103576040366003190112610103576106de610108565b6024359067ffffffffffffffff8211610103576020916001600160a01b039081906001906107149061037490369060040161030e565b015416906040519216148152f35b906107356020928281519485920161011e565b0190565b602061075291816040519382858094519384920161011e565b8101600081520301902090565b602061077891816040519382858094519384920161011e565b8101600281520301902090565b60209061079f92826040519483868095519384920161011e565b82019081520301902090565b34610103576107b936610386565b6107c282610739565b60018101549092906001600160a01b031633036108325761082d8261080b61081f947f09e712397bdfeb330419324b95d1d1e2a91a8b47587998d6d408c6958740e56d96610a2e565b604051938493604085526040850190610141565b908382036020850152610141565b0390a1005b60405162461bcd60e51b81526020600482015260096024820152682737ba1037bbb732b960b91b6044820152606490fd5b90600182811c92168015610893575b602083101461087d57565b634e487b7160e01b600052602260045260246000fd5b91607f1691610872565b906040519182600082546108b081610863565b9081845260209460019160018116908160001461091e57506001146108df575b5050506102c592500383610296565b600090815285812095935091905b8183106109065750506102c593508201013880806108d0565b855488840185015294850194879450918301916108ed565b925050506102c594925060ff191682840152151560051b8201013880806108d0565b1561094757565b60405162461bcd60e51b815260206004820152601960248201527f5375727665792049442063616e6e6f7420626520656d707479000000000000006044820152606490fd5b1561099357565b60405162461bcd60e51b815260206004820152601860248201527f49504653204349442063616e6e6f7420626520656d70747900000000000000006044820152606490fd5b90601f81116109e657505050565b6000916000526020600020906020601f850160051c83019410610a24575b601f0160051c01915b828110610a1957505050565b818155600101610a0d565b9092508290610a04565b919091825167ffffffffffffffff811161026457610a5681610a508454610863565b846109d8565b602080601f8311600114610a9957508190610a8a939495600092610a8e575b50508160011b916000199060031b1c19161790565b9055565b015190503880610a75565b90601f19831695610aaf85600052602060002090565b926000905b888210610aec57505083600195969710610ad3575b505050811b019055565b015160001960f88460031b161c19169055388080610ac9565b80600185968294968601518155019501930190610ab4565b906040600291610b15815185610a2e565b6001840160018060a01b036020830151166bffffffffffffffffffffffff60a01b8254161790550151910155565b908154680100000000000000008110156102645760018101808455811015610b77576102c592600052602060002001610a2e565b634e487b7160e01b600052603260045260246000fd5b939291610bb690610ba8604093606088526060880190610141565b908682036020880152610141565b930152565b90604051610bc88161027a565b604060028294610bd78161089d565b845260018101546001600160a01b031660208501520154910152565b634e487b7160e01b600052601160045260246000fd5b6000198114610c185760010190565b610bf3565b610c359060206040519282848094519384920161011e565b810103902090565b929190610bb6602091604086526040860190610141565b929091926020610c6b610c6684610739565b610bbb565b01805190946001600160a01b039390918416156106b357604093845190610d5f610d53610d4584610cb8610cb2610ca5602084018c610722565b601f60fa1b815260010190565b89610722565b0394610ccc601f1996878101835282610296565b8951610cec81610ce0602082018095610722565b03888101835282610296565b519020948951610d3b602082019282610d2f8a86603c917f19457468657265756d205369676e6564204d6573736167653a0a3332000000008252601c8201520190565b03908101835282610296565b519020998a610eee565b99516001600160a01b031690565b6001600160a01b031690565b9716968703610e7457610d86610d7f826000526003602052604060002090565b5460ff1690565b610e6357917f120be7a779fd31251124a6f0146622671a554fe5d1f554dc51006fc59b6dc1fe7fe6d0ab9c1bd0870c933bbb7d65e7a1ea1258be080d623c1ea46dce5cca03c55f969492610df8610deb610e5b98966000526003602052604060002090565b805460ff19166001179055565b610e0a610e048261075f565b84610785565b610e148154610c09565b9055610e3b610e35610e2e610e288461075f565b86610785565b5492610c1d565b93610c1d565b93610e4a865192839283610c3d565b0390a3519081529081906020820190565b0390a2600190565b8451636569570160e11b8152600490fd5b8451635a1f7bdd60e01b8152600490fd5b60ff601b9116019060ff8211610c1857565b15610e9e57565b606460405162461bcd60e51b815260206004820152602060248201527f496e76616c6964207369676e6174757265207265636f766572792076616c75656044820152fd5b6040513d6000823e3d90fd5b6041825103610f99576020916000918291848101519260606040830151920151901a92601b8410610f82575b90610f5e91610f3860ff8616601b8114908115610f77575b50610e97565b604051948594859094939260ff6060936080840197845216602083015260408201520152565b838052039060015afa15610f725760005190565b610ee2565b601c91501438610f32565b9290610f90610f5e92610e85565b93909150610f1a565b60405162461bcd60e51b815260206004820152601860248201527f496e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606490fdfea2646970667358221220d912bea55c14b0bcef70b59b1480cde9e6b103689bf2939051086d6d6bad2ada64736f6c63430008180033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
