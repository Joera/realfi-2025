{
  "_format": "hh-sol-artifact-1",
  "contractName": "CardValidator",
  "sourceName": "contracts/card-validator.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_initialPublicKey",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "InvalidPublicKey",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidSignature",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NullifierAlreadyUsed",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "nullifier",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newCount",
          "type": "uint256"
        }
      ],
      "name": "CardValidated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "newPublicKey",
          "type": "address"
        }
      ],
      "name": "PublicKeySet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "signer",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "messageHash",
          "type": "bytes32"
        }
      ],
      "name": "SignatureValidated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "name": "batchCardCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        }
      ],
      "name": "getBatchCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getPublicKey",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "nullifier",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        }
      ],
      "name": "isNullifierUsed",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "messageHash",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "signature",
          "type": "bytes"
        }
      ],
      "name": "isValidSignature",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "publicKey",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_publicKey",
          "type": "address"
        }
      ],
      "name": "setPublicKey",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "usedNullifiers",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "nullifier",
          "type": "string"
        },
        {
          "internalType": "bytes",
          "name": "signature",
          "type": "bytes"
        },
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        }
      ],
      "name": "validateCard",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x6080346100a157601f610a5638819003918201601f19168301916001600160401b038311848410176100a6578084926020946040528339810103126100a157516001600160a01b038116908190036100a1578060018060a01b0319338160015416176001556000541617600055604051907fef2f6b1229802d1d85222a60bd02e639097b2e5ab4279b3212482810d8bd7d4e600080a261099990816100bd8239f35b600080fd5b634e487b7160e01b600052604160045260246000fdfe6080604052600436101561001257600080fd5b60003560e01c8063097eb759146100bd5780631626ba7e146100b8578063206137aa146100b35780632e334452146100ae57806363ffab31146100ae5780638da5cb5b146100a957806394b2c95c146100a45780639b498a401461009a578063d61d6b631461009f578063d8e5f46e1461009a5763f2fde38b1461009557600080fd5b6106b3565b610438565b61047c565b610310565b6102e7565b6102be565b61028d565b610235565b6100e9565b60209060031901126100e4576004356001600160a01b03811681036100e45790565b600080fd5b346100e4576100f7366100c2565b6001546001600160a01b0391906101119083163314610737565b16801561015257600080546001600160a01b03191682178155907fef2f6b1229802d1d85222a60bd02e639097b2e5ab4279b3212482810d8bd7d4e8280a280f35b60405162461bcd60e51b815260206004820152602160248201527f5075626c6963206b65792063616e6e6f74206265207a65726f206164647265736044820152607360f81b6064820152608490fd5b634e487b7160e01b600052604160045260246000fd5b90601f8019910116810190811067ffffffffffffffff8211176101d957604052565b6101a1565b81601f820112156100e45780359067ffffffffffffffff82116101d95760405192610213601f8401601f1916602001856101b7565b828452602083830101116100e457816000926020809301838601378301015290565b346100e45760403660031901126100e45760243567ffffffffffffffff81116100e45761027361026b60209236906004016101de565b600435610873565b6000546040516001600160a01b0392831691909216148152f35b346100e45760203660031901126100e4576004356000526003602052602060ff604060002054166040519015158152f35b346100e45760003660031901126100e4576000546040516001600160a01b039091168152602090f35b346100e45760003660031901126100e4576001546040516001600160a01b039091168152602090f35b346100e45760403660031901126100e45767ffffffffffffffff6004358181116100e4576103429036906004016101de565b906024359081116100e45761035b9036906004016101de565b6103a860216040518093602061037a81840197888151938492016103d8565b8201601f60fa1b602082015261039982518093602087850191016103d8565b010360018101845201826101b7565b51902060005260036020526103d460ff6040600020541660405191829182919091602081019215159052565b0390f35b60005b8381106103eb5750506000910152565b81810151838201526020016103db565b9061040e602092828151948592016103d8565b0190565b602061042b9181604051938285809451938492016103d8565b8101600281520301902090565b346100e45760203660031901126100e45760043567ffffffffffffffff81116100e45761047361046e60209236906004016101de565b610412565b54604051908152f35b346100e45760603660031901126100e45767ffffffffffffffff600480358281116100e4576104ae90369083016101de565b916024358181116100e4576104c690369084016101de565b906044359081116100e4576104de90369084016101de565b92604093845161059b8161050e6105086104fb60208401886103fb565b601f60fa1b815260010190565b856103fb565b0391610522601f19938481018352826101b7565b8751610542816105366020820180956103fb565b038581018352826101b7565b5190209187516105916020820192826105858786603c917f19457468657265756d205369676e6564204d6573736167653a0a3332000000008252601c8201520190565b039081018352826101b7565b5190209485610873565b6000546001600160a01b0391821696911686036106a5576105d06105c9836000526003602052604060002090565b5460ff1690565b6106975750917fa15daa3e39295cf76ba66d1940141e4e02402bdcd9bcfcd8cd3eaccf7756e33c7fe6d0ab9c1bd0870c933bbb7d65e7a1ea1258be080d623c1ea46dce5cca03c55f949261064161063461068a966000526003602052604060002090565b805460ff19166001179055565b61064a81610412565b61065481546107a3565b905561066961066282610412565b54916107b7565b926106788951928392836107d7565b0390a284519081529081906020820190565b0390a25160018152602090f35b8651636569570160e11b8152fd5b8651638baa579f60e01b8152fd5b346100e4576106c1366100c2565b600154906001600160a01b03906106db3383851614610737565b169081156106f3576001600160a01b03191617600155005b606460405162461bcd60e51b815260206004820152602060248201527f4e6577206f776e65722063616e6e6f74206265207a65726f20616464726573736044820152fd5b1561073e57565b60405162461bcd60e51b815260206004820152602160248201527f4f6e6c79206f776e65722063616e2063616c6c20746869732066756e6374696f6044820152603760f91b6064820152608490fd5b634e487b7160e01b600052601160045260246000fd5b60001981146107b25760010190565b61078d565b6107cf906020604051928284809451938492016103d8565b810103902090565b9291906060602091604086526107fb815180928160408a015285858a0191016103d8565b601f8019910116850101930152565b60ff601b9116019060ff82116107b257565b1561082357565b606460405162461bcd60e51b815260206004820152602060248201527f496e76616c6964207369676e6174757265207265636f766572792076616c75656044820152fd5b6040513d6000823e3d90fd5b604182510361091e576020916000918291848101519260606040830151920151901a92601b8410610907575b906108e3916108bd60ff8616601b81149081156108fc575b5061081c565b604051948594859094939260ff6060936080840197845216602083015260408201520152565b838052039060015afa156108f75760005190565b610867565b601c915014386108b7565b92906109156108e39261080a565b9390915061089f565b60405162461bcd60e51b815260206004820152601860248201527f496e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606490fdfea2646970667358221220a1e71bd71f8be0b435787892ba1bab982842b2066c5cb7ec999e790d2f9ec44d64736f6c63430008180033",
  "deployedBytecode": "0x6080604052600436101561001257600080fd5b60003560e01c8063097eb759146100bd5780631626ba7e146100b8578063206137aa146100b35780632e334452146100ae57806363ffab31146100ae5780638da5cb5b146100a957806394b2c95c146100a45780639b498a401461009a578063d61d6b631461009f578063d8e5f46e1461009a5763f2fde38b1461009557600080fd5b6106b3565b610438565b61047c565b610310565b6102e7565b6102be565b61028d565b610235565b6100e9565b60209060031901126100e4576004356001600160a01b03811681036100e45790565b600080fd5b346100e4576100f7366100c2565b6001546001600160a01b0391906101119083163314610737565b16801561015257600080546001600160a01b03191682178155907fef2f6b1229802d1d85222a60bd02e639097b2e5ab4279b3212482810d8bd7d4e8280a280f35b60405162461bcd60e51b815260206004820152602160248201527f5075626c6963206b65792063616e6e6f74206265207a65726f206164647265736044820152607360f81b6064820152608490fd5b634e487b7160e01b600052604160045260246000fd5b90601f8019910116810190811067ffffffffffffffff8211176101d957604052565b6101a1565b81601f820112156100e45780359067ffffffffffffffff82116101d95760405192610213601f8401601f1916602001856101b7565b828452602083830101116100e457816000926020809301838601378301015290565b346100e45760403660031901126100e45760243567ffffffffffffffff81116100e45761027361026b60209236906004016101de565b600435610873565b6000546040516001600160a01b0392831691909216148152f35b346100e45760203660031901126100e4576004356000526003602052602060ff604060002054166040519015158152f35b346100e45760003660031901126100e4576000546040516001600160a01b039091168152602090f35b346100e45760003660031901126100e4576001546040516001600160a01b039091168152602090f35b346100e45760403660031901126100e45767ffffffffffffffff6004358181116100e4576103429036906004016101de565b906024359081116100e45761035b9036906004016101de565b6103a860216040518093602061037a81840197888151938492016103d8565b8201601f60fa1b602082015261039982518093602087850191016103d8565b010360018101845201826101b7565b51902060005260036020526103d460ff6040600020541660405191829182919091602081019215159052565b0390f35b60005b8381106103eb5750506000910152565b81810151838201526020016103db565b9061040e602092828151948592016103d8565b0190565b602061042b9181604051938285809451938492016103d8565b8101600281520301902090565b346100e45760203660031901126100e45760043567ffffffffffffffff81116100e45761047361046e60209236906004016101de565b610412565b54604051908152f35b346100e45760603660031901126100e45767ffffffffffffffff600480358281116100e4576104ae90369083016101de565b916024358181116100e4576104c690369084016101de565b906044359081116100e4576104de90369084016101de565b92604093845161059b8161050e6105086104fb60208401886103fb565b601f60fa1b815260010190565b856103fb565b0391610522601f19938481018352826101b7565b8751610542816105366020820180956103fb565b038581018352826101b7565b5190209187516105916020820192826105858786603c917f19457468657265756d205369676e6564204d6573736167653a0a3332000000008252601c8201520190565b039081018352826101b7565b5190209485610873565b6000546001600160a01b0391821696911686036106a5576105d06105c9836000526003602052604060002090565b5460ff1690565b6106975750917fa15daa3e39295cf76ba66d1940141e4e02402bdcd9bcfcd8cd3eaccf7756e33c7fe6d0ab9c1bd0870c933bbb7d65e7a1ea1258be080d623c1ea46dce5cca03c55f949261064161063461068a966000526003602052604060002090565b805460ff19166001179055565b61064a81610412565b61065481546107a3565b905561066961066282610412565b54916107b7565b926106788951928392836107d7565b0390a284519081529081906020820190565b0390a25160018152602090f35b8651636569570160e11b8152fd5b8651638baa579f60e01b8152fd5b346100e4576106c1366100c2565b600154906001600160a01b03906106db3383851614610737565b169081156106f3576001600160a01b03191617600155005b606460405162461bcd60e51b815260206004820152602060248201527f4e6577206f776e65722063616e6e6f74206265207a65726f20616464726573736044820152fd5b1561073e57565b60405162461bcd60e51b815260206004820152602160248201527f4f6e6c79206f776e65722063616e2063616c6c20746869732066756e6374696f6044820152603760f91b6064820152608490fd5b634e487b7160e01b600052601160045260246000fd5b60001981146107b25760010190565b61078d565b6107cf906020604051928284809451938492016103d8565b810103902090565b9291906060602091604086526107fb815180928160408a015285858a0191016103d8565b601f8019910116850101930152565b60ff601b9116019060ff82116107b257565b1561082357565b606460405162461bcd60e51b815260206004820152602060248201527f496e76616c6964207369676e6174757265207265636f766572792076616c75656044820152fd5b6040513d6000823e3d90fd5b604182510361091e576020916000918291848101519260606040830151920151901a92601b8410610907575b906108e3916108bd60ff8616601b81149081156108fc575b5061081c565b604051948594859094939260ff6060936080840197845216602083015260408201520152565b838052039060015afa156108f75760005190565b610867565b601c915014386108b7565b92906109156108e39261080a565b9390915061089f565b60405162461bcd60e51b815260206004820152601860248201527f496e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606490fdfea2646970667358221220a1e71bd71f8be0b435787892ba1bab982842b2066c5cb7ec999e790d2f9ec44d64736f6c63430008180033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
